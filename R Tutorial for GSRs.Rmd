---
title: "R Tutorial for GSRs"
author: "Randy Clopton"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Overview of RStudio
This document was created using RStudio, an IDE designed to make R easier to use
and to add in additional functionality. RStudio is the place you should go to 
get started on your R journey. To use RStudio, you do need to download R
separately, so make sure you've downloaded both.

You can download R here: https://www.r-project.org/

You can download RStudio here: https://posit.co/products/open-source/rstudio/

In addition, to use some of the key functionality that RStudio has built in, it 
may help to download a TeX editor (this just lets you use some formatting
features of RStudio better, and is totally optional), You can download the
preferred version for RStudio here: https://miktex.org/download

## RStudio Layout
RStudio has four main panes.
* Source pane: where you see your code
* Console pane: where you see your code run
* Environment pane: shows you what objects you've created, plus the code you've
run recently
* Output pane: shows you any files, plots, or other things you've created. Also
lets you find new packages, use the help feature, and enter presentation mode.

## R Script and Markdown Files
All of your work will be done in one of these two file types. R Scripts are just
documents where you put all of your code. R Markdown documents are a bit fuller
featured and let you do things like text formatting, organizing your code into
discrete chunks, and printing your output directly in the source pane. The main
advantage of markdown files for students is to create well formatted documents 
that are ready to use as your finalized problem set.

## RStudio Projects
RStudio also has a projects feature that lets you tie together a number of 
different files that are intended to be used in concert, including code, data 
files, and anything you output as part of your process. Creating a project also
tells R to load a directory that you created to contain all your files, which 
makes it easier to call up different files.

## Loading Relevant Packages
Before you start anything up in R, you will need to load in any packages you
want to use to conduct your analysis. We will discuss useful packages later, 
but for now, here's what the process of loading in packages looks like

```{r Load Packages}
#tidyverse is probably the most useful package and at least one of its elements
#will probably be loaded in every project you do
library(tidyverse)
#the plm package is a go-to for panel data. Once you get to fixed effects, this
#package will let you easily run models with defined fixed effects.
library(plm)
```

# Data Import and Manipulation (Ripper)
On the very off chance your data are perfectly prepared and ready for analysis,
you will need to perform a form of initial loading and analysis to ensure
the data can work well in an R environment. This process starts with first
understanding the different data formats that are compatible with R and how
those formats can be used in different scenarios depending on project needs
and outcomes. We then focus on data types and structures to understand how R
processes your data and how we can best structure your data to work in your 
environment. We continue with showing how we can load your data in to R (with
examples to showcase how flexible R is with different data sources) and finish
by showing how R can shape and manipulate data to work well in further analysis.

## Data Formats and Use Cases
Even though R has the ability to load in data from different file types, there
exists two native data formats particular to use in an R environment. These
two formats are Rdata (Rda) and Rds. One would use these formats in order to
directly save R objects created in a session for later use. The Rdata data
format is used to save multiple R objects where the Rds data format can save
a single R object. Depending on use case, the user has the option to save
multiple or singular objects within a native R data format. The user even has
the option to save the entire work space (an entire workflow or analysis) for
later use.

### Data Types
There are five primary data types in R. They are listed below with quick
examples. We will also discuss functions that examine the features of R objects.

**Data Types**
1. Character: "p", "CRD"
2. Numeric: 5, 3.14
3. Integer: 3L (the L forces R to store as an integer)
4. Logical: TRUE (1), FALSE (0)
5. Complex: 2 + 3i

**Functions for Feature Examination**
1. class() - What kind of object is it?
2. typeof() - What is the object's data type?
3. length() - How long is it? What are its dimensions?
4. attributes() - Does it have any metadata?

Please be aware that some functionality in R forces the use of similar data
types in order to ensure consistency. For example, R will not let the user
add together a numeric object with a character data type. It is also important
to note that logicals can be treated as 1s or 0s depending on the context in
which they are used.

### Data Structures
We will discuss the most important data structures available in R. We will also
discuss exploratory functions to help us better understand the contents of
different data structures and how this will lead to a full data pipeline.

First, we observe the primary data structures in R:
1. Vector
2. List
3. Matrix
4. Data Frame

**Vector**
A vector is a collection of entries that are of the same data type. The
creation of the vector will allow for entries to be of different data
types but R will force the conversion of the other entries so that all entries
are of the same data type. One example would be creating a vector of the entries
1, 3, and "r". R will force all entries to be of a character data type since
it can convert 1 and 3 to a character but cannot convert "r" to a numeric or
integer data type. Below are some examples creating a vector, adding to a
vector, and examining the contents of the vector. Vectors can also handle
missing data entries (NA). We will examine how we can identify missing
entries as well.

```{r Vector}
# Create a vector.
v <- c(2, 3)

# Add an element to the vector.
v <- c(v, 5, 7)

# Observe the updated vector.
v

# Get the third element from the vector (NOTE: R is 1 indexed).
v[[3]]

# Examine the type of contents in the vector.
typeof(v)

# Examine the length of the vector.
length(v)

# Add an NA element to the vector.
v <- c(NA, v, NA)

# Check if the vector has any NA values.
anyNA(v)

# Check to see where the vector has a NA values.
which(is.na(v))
```

**List**
A list is similar to a vector but allows for entries of different data types.
We can even coerce a vector to become a list. Again, we explore the creation of
a list, adding to a list, and examining contents of the list. A list can hold
other more developed data types and structures, such as other lists, matrices,
and data frames.

```{r List}
# Create a list.
l <- list(3, "t", FALSE, 3 + 3i, NA)

# Observe the list.
l

# Examine the length of the list.
length(v)

# Get the second element from the list.
l[[2]]

# Convert vector to list.
v <- as.list(v)
```

**Matrix**
Matrices are vectors of two dimensions. They carry the same general
characteristic of a vector (all entries must be of the same data type). We can
easily convert a vector to a matrix by defining its dimensions (number of rows 
and number of columns). We show how to construct a matrix and how to access
certain elements in a matrix.

```{r Matrix}
# We first define a vector.
v <- 1:6

# We can now transform the vector into a matrix by changing the dimensions.
dim(v) <- c(2, 3)

# We now observe the matrix has 2 rows and 3 columns.
v

# We can access entries in a matrix by indexing the row and then the column.
v[2, 2]

# We can also create a matrix using the matrix constructor function.
m <- matrix(1:6, nrow = 2, ncol = 3)

# We observe the matrix is built identically to the one above.
m
```

**Data Frame**
Most of your analysis will involve the use of a data frame because of its ability
to house data of different type and the ease with which R makes it to import
data to a data frame. Data frames are a specific type of list where every
element of this list has the same length. This allows for the presence of
missing data and uniformity across observations. We usually create a data frame
when loading in data from  an external document. However, we will show how to
create a data frame on the fly and functionality to observe the data frame and
its construction.

```{r Data Frame}
# We start by creating a data frame by hand.
df <- data.frame(id = letters[1:10], x = 1:10, y = 11:20)

# We observe the entire data frame above.
df

# We can observe the top of the data frame.
head(df)

# We observe the bottom of the data frame.
tail(df)

# We observe the dimensions of the data frame.
dim(df)

# We reference certain elements in the data frame by indexing [row, column].
df[5, 2]

# We pull out entire columns from the data frame.
df[["id"]]

# We pull out columns also by the $ operator in R.
df$id
```

## Importing Data Files
Importing data files is the first step of your analysis. One of the most
important aspects of importing is knowing the data's file type and also where
the file is located on your computer.

To avoid confusion over computer directories, you can set the working directory
of the current R-Markdown file by clicking "Session" -> "Set Working Directory".
If the files you would like to import as data are located in the same directory
as the current R or R-Markdown file, click "To Source File Location". Otherwise,
click "Choose Directory...". You also do not need to set the working directory
and can instead use the full file location when loading in data.

```{r Working Directory}
# Confirm your working directory.
getwd()

# Can also set working directory using setwd(dir = desired directory).
```

```{r Import RData File}
## Example loading in an RData file.

# Load RData file to R object.
rdata <- load(file = "RData_ex.rda")

# Make sure the data were loaded properly.
dim(rdata)
```

```{r Import Excel File}
## Example loading in an Excel file.

# Include library to load both XLS and XLSX files.
library(readxl)

# Load Excel file to R object.
excel <- read_excel("Excel_ex.xls", sheet = NA)

# Make sure the data were loaded properly.
dim(excel)
```

```{r Import CSV File}
## Example loading in a CSV file.

# Load CSV file in to R object.
csv <- read.csv(file = "CSV_ex.csv")

# Make sure the data were loaded properly.
dim(csv)
```

```{r Import Stata File}
## Example loading in a Stata file.

# Include library to load Stata file.
library(haven)

# Load Stata file in to R object.
stata <- read_dta(file = "Stata_ex.dta")

# Make sure the data were loaded properly.
dim(stata)
```

R also has the ability to web-scrape and communicate with Application
Programming Interfaces (APIs). Web-scraping is a technique used to collect
information or data from a website. This process is relient on the inherent
structure of a website (the actual HTML objects). APIs are ways to collect
information or data from a service. This service may be offered by a government
agency or a company. These APIs are sometimes key protected and only available
behind pay-walls. Others are publicly accessible but may be limited by the
number of times you may ask the API to submit/transmit information and data.
Both of these techniques of collecting data (webscraping and API connectivity)
can be reviewed in further detail by following the links below:

[Web-scraping](https://r4ds.hadley.nz/webscraping)

[Application Programming Interfaces (APIs)](https://info201.github.io/apis.html)

## Data Shaping and the Pipe Function


### Creating a dummy variable (RC Note: this is a specific thing that needs to be in this section as it's what is going to get us to the analysis part of the document)

```{r Dummy Variable}

```

# Conducting Statistical Analyses Using R (Clopton)

## Generating Summary Statistics
```{r}

```

## T Tests and Correlations
```{r}

```

## Regressions
```{r}

```

## F Tests
```{r}

```

## Interaction Terms and Difference-in-Difference
```{r}

```

## Visualizations
```{r}

```

## Additional Useful Packages
